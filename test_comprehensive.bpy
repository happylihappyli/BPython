import asyncio

# Decorator test
def my_decorator(func) {
    def wrapper(*args, **kwargs) {
        print("Wrapper before")
        result = func(*args, **kwargs)
        print("Wrapper after")
        return result
    }
    return wrapper
}

@my_decorator
def hello(name) {
    print(f"Hello, {name}")
}

# Class test
class Person {
    def __init__(self, name, age) {
        self.name = name
        self.age = age
    }

    def greet(self) {
        print(f"Hi, I am {self.name} and I am {self.age} years old.")
    }
}

# Async test
async def async_counter(n) {
    print(f"Starting counter to {n}")
    for i in range(n) {
        await asyncio.sleep(0.01)
        print(f"Count {i}")
    }
    return "Done"
}

async def main_async() {
    print("--- Async Test ---")
    res = await async_counter(3)
    print(f"Async Result: {res}")
}

def main() {
    print("--- Decorator Test ---")
    hello("World")

    print("\n--- Class Test ---")
    p = Person("Alice", 30)
    p.greet()

    print("\n--- Compact Syntax Test ---")
    x = 10
    if x > 5 { print("x is big") }
    
    items = [1, 2, 3]
    print("Compact Loop:", end=" ")
    for i in items { print(i, end=" ") }
    print("")

    # List comprehension (should be standard)
    squares = [x*x for x in items]
    print(f"Squares: {squares}")

    print("\n--- Match Test (Compact) ---")
    match x { case 10 { print("Matched 10") } case _ { print("No match") } }

    # Run async
    asyncio.run(main_async())
}

if __name__ == "__main__" {
    main()
}
